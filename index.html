<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetris RPG Battle</title>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="./css/style.css">

    <!-- –®—Ä–∏—Ñ—Ç—ã (Pixel Art —Å—Ç–∏–ª—å) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>

<div id="main-container">
    <div id="tetris-wrapper" class="tetris-wrapper">
        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –¢–µ—Ç—Ä–∏—Å–∞ -->
        <canvas id="game-board" width="309" height="619"></canvas>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="side-panel">
            <h1>–¢–ï–¢–†–ò–°</h1>

            <div class="info-box">
                <span class="info-title">–°–ß–Å–¢</span>
                <p id="score">0</p>
            </div>

            <div class="info-box">
                <span class="info-title">–õ–ò–ù–ò–ò</span>
                <p id="lines">0</p>
            </div>

            <div class="info-box">
                <span class="info-title">–£–†–û–í–ï–ù–¨</span>
                <p id="level">1</p>
            </div>

            <!-- –ü—Ä–µ–≤—å—é —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–≥—É—Ä—ã -->
            <div class="info-box next-piece-container">
                <span class="info-title">–°–õ–ï–î–£–Æ–©–ê–Ø</span>
                <canvas id="next-piece-board" width="185" height="185"></canvas>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞ -->
            <button id="start-button" class="game-button">–°–¢–ê–†–¢</button>
        </aside>

        <!-- –ü–∞–Ω–µ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤ (–°–∫—Ä—ã—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã) -->
        <aside class="side-panel hidden" id="resources-container">
            <div class="info-box">
                <span class="info-title">–†–ï–°–£–†–°–´</span>
                <!-- JS –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å—é–¥–∞ —Ä–µ—Å—É—Ä—Å—ã -->
                <div id="main-resources-panel" class="info-box test"></div>
            </div>
        </aside>
    </div> <!-- –ö–æ–Ω–µ—Ü tetris-wrapper -->


    <!-- –°–õ–û–ô –ü–û–í–ï–†–• –ò–ì–†–´ (OVERLAY) -->
    <div id="game-overlay" class="hidden">

        <!-- 1. –û–ö–ù–û –ó–ê–ì–†–£–ó–ö–ò (Loader) -->
        <div id="loading-modal" class="hidden">
            <div class="loader-container">
                <div class="pixel-spinner"></div>
                <div class="pixel-spinner-shadow"></div>
            </div>
            <p class="loading-text">–ó–ê–ì–†–£–ó–ö–ê<span class="dots">...</span></p>
        </div>

        <!-- 2. –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ / GAME OVER -->
        <div id="game-menu" class="hidden">
            <h2 id="modal-title">–¢–ï–¢–†–ò–° RPG</h2>
            <p id="modal-text">–°–æ–±–µ—Ä–∏ –ª–∏–Ω–∏–∏, —á—Ç–æ–±—ã –Ω–∞–∫–æ–ø–∏—Ç—å –º–∞–Ω—É!</p>
            <button id="modal-button" class="game-button">–ò–ì–†–ê–¢–¨</button>
        </div>

        <!-- 3. –ë–ò–¢–í–ê (RPG) -->
        <div id="battle-modal" class="hidden">

            <!-- –®–∞–ø–∫–∞: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Ä–æ–≤–Ω—è -->
            <div class="battle-header">
                <h3>–°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                <div id="statistics-container">
                    <span id="statistics"></span>
                </div>
            </div>

            <!-- –ê—Ä–µ–Ω–∞: –ö–∞–Ω–≤–∞—Å —Å –≥–µ—Ä–æ—è–º–∏ -->
            <div class="battle-arena">
                <canvas id="battle-canvas"></canvas>
            </div>

            <!-- 4. –ü–ê–ù–ï–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø (–ü–æ–¥ –∞—Ä–µ–Ω–æ–π) -->
            <div class="battle-controls-row">

                <!-- –°–ª–µ–≤–∞: –ë–∞–∑–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
                <div class="basic-controls-group">
                    <button id="btn-basic-attack" class="game-button action-btn">
                        ‚öîÔ∏è –¢–æ–ø–Ω—É—Ç—å
                    </button>
                    <button id="btn-surrender" class="game-button escape-btn">
                        üè≥Ô∏è –°–¥–∞—Ç—å—Å—è
                    </button>
                </div>

                <!-- –°–ø—Ä–∞–≤–∞: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π (J, I, Z, S) -->
                <div id="modifiers-panel" class="modifiers-panel top-bar">
                    <button class="mod-btn" title="–ú–∞—Å—à—Ç–∞–± (–£—Ä–æ–Ω)" data-mod="J">
                        J <span class="badge" style="display:none">x0</span>
                    </button>
                    <button class="mod-btn" title="–î–µ–±–∞—Ñ—Ñ (–í—Ä–∞–≥)" data-mod="Z">Z</button>
                    <button class="mod-btn" title="–ë–∞—Ñ—Ñ (–°–µ–±—è)" data-mod="S">S</button>
                    <button class="mod-btn" title="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–•–æ–¥—ã)" data-mod="I">
                        I <span class="badge" style="display:none">x0</span>
                    </button>
                </div>
            </div>

            <!-- 5. –°–†–ï–î–ù–ò–ô –†–Ø–î (–ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è + –õ–æ–≥) -->
            <div class="battle-middle-row">

                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è (–°–õ–ï–í–ê, –£–∑–∫–∞—è) -->
                <div id="spell-preview-box" class="spell-info-card">

                    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
                    <div class="card-header-row">
                        <span id="preview-icon">‚ú®</span>
                        <span id="preview-name" class="card-title">–í—ã–±–æ—Ä:</span>
                    </div>

                    <!-- –°–∏–ª–∞ -->
                    <div class="card-row power">
                        <span class="label">–°–∏–ª–∞:</span>
                        <span id="preview-power" class="value">--</span>
                    </div>

                    <!-- –ë–ª–æ–∫ —ç—Ñ—Ñ–µ–∫—Ç–∞ (–°–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                    <div id="preview-effect-block" class="effect-info-block">
                        <div class="card-row effect-header">
                            <span class="label">–≠—Ñ—Ñ–µ–∫—Ç:</span>
                            <span id="effect-name" class="value effect-name">--</span>
                        </div>
                        <div class="card-row indent">
                            <span class="label">–°–∏–ª–∞:</span>
                            <span id="effect-power" class="value">--</span>
                        </div>
                        <div class="card-row indent">
                            <span class="label">–î–ª–∏—Ç.:</span>
                            <span id="effect-duration" class="value">--</span>
                        </div>
                        <div class="card-row indent">
                            <span class="label">–¢–∏–ø:</span>
                            <span id="effect-type" class="value">--</span>
                        </div>
                        <div class="card-row indent">
                            <span class="label">–¶–µ–ª—å:</span>
                            <span id="effect-target" class="value">--</span>
                        </div>
                    </div>

                    <!-- –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ (–í–Ω–∏–∑—É –∫–∞—Ä—Ç–æ—á–∫–∏) -->
                    <div class="card-footer-cost">
                        <span class="label">–¶–µ–Ω–∞:</span>
                        <div id="preview-cost" class="cost-tags-list">
                            <span id="total-cost" class="value">--</span>
                        </div>
                    </div>
                </div>

                <!-- –õ–æ–≥ –±–æ—è (–°–ü–†–ê–í–ê, –®–∏—Ä–æ–∫–∏–π) -->
                <div id="battle-log" class="battle-log">

                </div>
            </div>
            <div id="battle-resources-container" class="battle-resources-row">
                <!-- JS —Å—é–¥–∞ –≤—Å—Ç–∞–≤–∏—Ç: [T:10] [J:5] ... -->
            </div>
            <!-- 6. –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ (–°–ø–∏—Å–æ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π + –ö–∞—Å—Ç) -->
            <div class="battle-ui-constructor">
                <div class="footer-actions vertical-layout">

                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π (–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS) -->
                    <div class="spells-grid-container" id="spells-container"></div>

                    <!-- –ö–Ω–æ–ø–∫–∞ –ü–†–ò–ú–ï–ù–ò–¢–¨ -->
                    <div class="cast-wrapper-vertical">
                        <button id="cast-btn" class="cast-btn" disabled>
                            –ü–†–ò–ú–ï–ù–ò–¢–¨
                        </button>
                    </div>
                </div>
            </div>

        </div> <!-- –ö–æ–Ω–µ—Ü battle-modal -->

    </div> <!-- –ö–æ–Ω–µ—Ü game-overlay -->

</div>

<!-- –°–ö–†–ò–ü–¢–´ (–°–æ–±–ª—é–¥–∞–π –ø–æ—Ä—è–¥–æ–∫!) -->
<script src="js/utils/utils.js"></script>
<script src="js/utils/event_strings.js"></script> <!-- –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç—É—Ç –µ—Å—Ç—å EVENTS -->
<script src="js/rpg/assets_string.js"></script>

<!-- 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ -->
<script src="js/rpg/graphics_config.js"></script>
<script src="./js/rpg/heroesDB.js"></script> <!-- –ì–µ—Ä–æ–∏ –∏ –í—Ä–∞–≥–∏ -->
<script src="./js/rpg/monstresDB.js"></script> <!-- –ì–µ—Ä–æ–∏ –∏ –í—Ä–∞–≥–∏ -->
<script src="./js/rpg/dbSpells.js"></script>  <!-- –ë–∞–∑–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π -->
<script src="./js/rpg/dbMobSpells.js"></script>
<!-- 3. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã -->
<script src="js/utils/eventBus.js"></script>
<script src="js/utils/inputHandler.js"></script>
<script src="./js/rpg/unit.js"></script>
<script src="./js/rpg/animations_classes.js"></script>
<!-- 4. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã (–ë–∞–∑–æ–≤—ã–µ) -->
<script src="./js/rpg/resourceManager.js"></script>
<script src="./js/rpg/assetsManager.js"></script>
<script src="./js/managers/baseUI.js"></script>
<script src="./js/managers/windowUiManager.js"></script>
<script src="./js/tetris/tetrisUI.js"></script>
<script src="./js/rpg/battleUi.js"></script>
<!--<script src="./js/managers/uiManager.js"></script>-->
<script src="./js/managers/animationManager.js"></script>

<!-- 5. –¢–µ—Ç—Ä–∏—Å –õ–æ–≥–∏–∫–∞ -->
<script src="js/tetris/grid.js"></script>
<script src="js/tetris/pieceFactory.js"></script>
<script src="./js/renderers/renderer.js"></script>

<!-- 6. RPG –õ–æ–≥–∏–∫–∞ (–ë–∏–ª–¥–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –î–û BattleManager) -->
<script src="./js/rpg/battleRenderer.js"></script>
<script src="./js/rpg/castableSpell.js"></script>
<script src="./js/rpg/spellBuilder.js"></script> <!-- –ò—Å–ø—Ä–∞–≤–∏–ª SpellBilder –Ω–∞ SpellBuilder -->
<script src="./js/rpg/battleManager.js"></script>

<!-- 7. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è -->
<script src="js/tetris/game.js"></script>
<script src="./js/main.js"></script>

</body>
</html>