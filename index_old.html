<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetris RPG Battle</title>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="./css/style.css">

    <!-- –®—Ä–∏—Ñ—Ç—ã (Pixel Art —Å—Ç–∏–ª—å) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>

<div id="main-container">
    <div id="tetris-wrapper" class="tetris-wrapper">
        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
        <canvas id="game-board" width="309" height="619"></canvas>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="side-panel">
            <h1>–¢–ï–¢–†–ò–°</h1>

            <div class="info-box">
                <span class="info-title">–°–ß–Å–¢</span>
                <p id="score">0</p>
            </div>

            <div class="info-box">
                <span class="info-title">–õ–ò–ù–ò–ò</span>
                <p id="lines">0</p>
            </div>

            <div class="info-box">
                <span class="info-title">–£–†–û–í–ï–ù–¨</span>
                <p id="level">1</p>
            </div>

            <!-- –ü—Ä–µ–≤—å—é —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–≥—É—Ä—ã -->
            <div class="info-box next-piece-container">
                <span class="info-title">–°–õ–ï–î–£–Æ–©–ê–Ø</span>
                <canvas id="next-piece-board" width="185" height="185"></canvas>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞ (–¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã –≤—Ä—É—á–Ω—É—é) -->
            <button id="start-button" class="game-button">–°–¢–ê–†–¢</button>
        </aside>

        <!-- –ü–∞–Ω–µ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤ (–°–∫—Ä—ã—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã) -->
        <aside class="side-panel hidden" id="resources-container">
            <div class="info-box">
                <span class="info-title">–†–ï–°–£–†–°–´</span>
                <!-- JS –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å—é–¥–∞ div'—ã -->
                <div id="main-resources-panel" class="info-box test"></div>
            </div>
        </aside>
    </div> <!-- –ö–æ–Ω–µ—Ü tetris-wrapper -->


    <!-- –°–õ–û–ô –ü–û–í–ï–†–• –ò–ì–†–´ (OVERLAY) -->
    <div id="game-overlay" class="hidden">

        <!-- 1. –û–ö–ù–û –ó–ê–ì–†–£–ó–ö–ò (Loader) -->
        <!-- –ü–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ BattleManager –∂–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∞—Å—Å–µ—Ç–æ–≤ -->
        <div id="loading-modal" class="hidden">
            <div class="loader-container">
                <div class="pixel-spinner"></div>
                <div class="pixel-spinner-shadow"></div>
            </div>
            <p class="loading-text">–ó–ê–ì–†–£–ó–ö–ê<span class="dots">...</span></p>
        </div>

        <!-- 2. –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ / GAME OVER -->
        <div id="game-menu" class="hidden">
            <h2 id="modal-title">–¢–ï–¢–†–ò–° RPG</h2>
            <p id="modal-text">–°–æ–±–µ—Ä–∏ –ª–∏–Ω–∏–∏, —á—Ç–æ–±—ã –Ω–∞–∫–æ–ø–∏—Ç—å –º–∞–Ω—É!</p>
            <button id="modal-button" class="game-button">–ò–ì–†–ê–¢–¨</button>
        </div>

        <!-- 3. –ë–ò–¢–í–ê (RPG) -->
        <div id="battle-modal" class="hidden">

            <!-- –®–∞–ø–∫–∞: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Ä–æ–≤–Ω—è -->
            <div class="battle-header">
                <h3>–°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                <div id="statistics-container">
                    <span id="statistics"></span>
                </div>
            </div>

            <!-- –ê—Ä–µ–Ω–∞: –ö–∞–Ω–≤–∞—Å —Å –≥–µ—Ä–æ—è–º–∏ -->
            <div class="battle-arena">
                <canvas id="battle-canvas"></canvas>
            </div>

            <div class="battle-controls-panel">
                <!-- –ö–Ω–æ–ø–∫–∞ —Å–ª–∞–±–æ–π –∞—Ç–∞–∫–∏ -->
                <button id="btn-basic-attack" class="game-button action-btn">
                    ‚öîÔ∏è –¢–æ–ø–Ω—É—Ç—å (–ê—Ç–∞–∫–∞)
                </button>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å–¥–∞—á–∏ -->
                <button id="btn-surrender" class="game-button escape-btn">
                    üè≥Ô∏è –°–¥–∞—Ç—å—Å—è
                </button>
            </div>

            <!-- –õ–æ–≥ –±–æ—è -->
            <div id="battle-log" class="battle-log">
                <div class="log-entry system">> –ë–∏—Ç–≤–∞ –Ω–∞—á–∞–ª–∞—Å—å!</div>
            </div>

            <!-- UI: –ö–û–ù–°–¢–†–£–ö–¢–û–† –ó–ê–ö–õ–ò–ù–ê–ù–ò–ô -->
            <div class="battle-ui-constructor">

                <!-- –í–ï–†–•–ù–ò–ô –†–Ø–î: –ò–Ω—Ñ–æ + –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (–í–ú–ï–°–¢–ï) -->
                <div class="spell-maker-header">

                    <!-- –ê. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä (–°–ª–µ–≤–∞) -->
                    <div id="spell-preview-box" class="preview-box compact">
                        <div class="preview-main-info">
                            <span id="preview-text">–í–´–ë–ï–†–ò–¢–ï –ó–ê–ö–õ–ò–ù–ê–ù–ò–ï</span>
                        </div>
                        <!-- –¶–µ–Ω–∞ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å—é–¥–∞ -->
                        <span id="preview-cost" class="preview-cost hidden"></span>
                    </div>
                    <!-- –ë. –ü–∞–Ω–µ–ª—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ (–°–ø—Ä–∞–≤–∞) -->
                    <div id="modifiers-panel" class="modifiers-panel compact">
                        <!-- –ö–Ω–æ–ø–∫–∏ J, I, Z, S –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å —á–µ—Ä–µ–∑ JS -->
                        <button class="mod-btn active" title="–ú–∞—Å—à—Ç–∞–±">
                            J <span class="badge" style="display: block;">x2</span>
                        </button>

                        <!-- –ö–Ω–æ–ø–∫–∞ I: –ù–µ –∞–∫—Ç–∏–≤–Ω–∞ -->
                        <button class="mod-btn" title="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å">
                            I <span class="badge">x0</span>
                        </button>

                        <!-- –ö–Ω–æ–ø–∫–∞ Z: –ê–∫—Ç–∏–≤–Ω–∞ (–í–∫–ª—é—á–µ–Ω–∞) -->
                        <button class="mod-btn active" title="–î–µ–±–∞—Ñ—Ñ">
                            Z
                        </button>

                        <!-- –ö–Ω–æ–ø–∫–∞ S: –ù–µ –∞–∫—Ç–∏–≤–Ω–∞ -->
                        <button class="mod-btn" title="–ë–∞—Ñ—Ñ">
                            S
                        </button>
                    </div>
                </div>
                <!-- –í. –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å (–°–ø–∏—Å–æ–∫ + –ö–∞—Å—Ç) -->
                <div class="footer-actions vertical-layout">
                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π -->
                    <div class="spells-grid-container" id="spells-container">
                        <!-- –ö–Ω–æ–ø–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JS -->
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∞ –ö–ê–°–¢ -->
                    <div class="cast-wrapper-vertical">
                        <button id="cast-btn" class="cast-btn"> <!--hidden-->
                            –ü–†–ò–ú–ï–ù–ò–¢–¨
                        </button>
                    </div>
                </div>
            </div>
            <!-- –ö–æ–Ω–µ—Ü UI –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ -->

        </div> <!-- –ö–æ–Ω–µ—Ü battle-modal -->

    </div> <!-- –ö–æ–Ω–µ—Ü game-overlay -->

</div>

<!-- –°–ö–†–ò–ü–¢–´ (–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!) -->
<script src="js/utils/utils.js"></script>
<script src="js/utils/event_strings.js"></script>
<script src="js/rpg/assets_string.js"></script>
<script src="js/rpg/graphics_config.js"></script>
<script src="./js/rpg/gameData.js"></script>
<script src="js/utils/eventBus.js"></script>
<script src="./js/rpg/unit.js"></script>
<script src="js/utils/inputHandler.js"></script>
<script src="js/managers/uiManager.js"></script>
<script src="js/tetris/grid.js"></script>
<script src="js/tetris/pieceFactory.js"></script>
<script src="js/renderers/renderer.js"></script>
<script src="js/rpg/battleRenderer.js"></script>
<script src="js/managers/animationManager.js"></script>
<script src="js/rpg/resourceManager.js"></script>
<script src="js/rpg/assetsManager.js"></script>
<script src="./js/rpg/dbSpells.js"></script>
<script src="./js/rpg/castableSpell.js"></script>
<script src="js/rpg/spellBuilder.js"></script>
<script src="js/rpg/battleManager.js"></script>
<script src="js/tetris/game.js"></script>
<script src="./js/main.js"></script>

</body>
</html>

