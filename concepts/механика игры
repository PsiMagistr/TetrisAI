–§–∏–≥—É—Ä–∫–∏ —Ç–µ—Ç—Ä–∏—Å–∞ –æ—Ç–≤–µ—á–∞—é—Ç:

T - –ê—Ç–∞–∫–∞ (–û—Å–Ω–æ–≤–∞).
O - –õ–µ—á–µ–Ω–∏–µ (–û—Å–Ω–æ–≤–∞).
L - –ü–æ–≥–ª–æ—â–µ–Ω–∏–µ —É—Ä–æ–Ω–∞ (–û—Å–Ω–æ–≤–∞).
J - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞—Å—à—Ç–∞–±–∞. (–ù–∞–∂–∏–º–∞–µ—Ç—Å—è –¥–æ —Ç—Ä–µ—Ö —Ä–∞–∑ 25-50-70%).
S - –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π Dot —ç—Ñ—Ñ–µ–∫—Ç. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –æ–¥–∏–Ω —Ö–æ–¥.
Z - –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π Dot —ç—Ñ—Ñ–µ–∫—Ç. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –æ–¥–∏–Ω —Ö–æ–¥.
I - –î–µ–π—Å—Ç–≤–∏–µ —Ö–æ–¥–æ–≤ —ç—Ñ—Ñ–µ–∫—Ç–∞. (–ñ–º–µ—Ç—Å—è –¥–æ 2—Ö —Ä–∞–∑). –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞ 3-3 —Ö–æ–¥–∞.

–ö–∞–∂–¥–æ–º—É –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—é –ø–µ—Ä–µ–¥ –∫–∞—Å—Ç–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–æ—Ä–º—É–ª—É:

–û–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç

1) –ß–∞—Å—Ç–∏—Ü—ã –æ—Å–Ω–æ–≤—ã –¥–ª—è –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è. –ë–µ–∑ —ç—Ç–æ–≥–æ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –Ω–µ —Å–∫–∞—Å—Ç—É–µ—Ç—Å—è.

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

2) –ß–∞—Å—Ç–∏—Ü—ã –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –º–∞—Å—à—Ç–∞–±–∞. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –¥–æ 3 —Ä–∞–∑.
3) –ö–∞–∫–æ–π –ª–∏–±–æ —ç—Ñ—Ñ–µ–∫—Ç. (–ò–ª–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ 1 —Ö–æ–¥.
4) –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞. –ú–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –¥–æ 2—Ö —Ä–∞–∑. (+2. +3 —Ö–æ–¥–∞)

–ù–∞–ø—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º—É–ª–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è "–û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä".

1) 20 —á–∞—Å—Ç–∏—Ü —Ç–∏–ø–∞ T –æ—Å–Ω–æ–≤—ã. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ç—Ä–∞—Ç–∞.

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

2) –¢—Ä–∞—Ç–∞ —á–∞—Å—Ç–∏—Ü —Ç–∏–ø–∞ J –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞—Å—à—Ç–∞–±–∞ (–î–æ–ø—É—Å—Ç–∏–º –Ω–∞–∂–∞–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑ - —ç—Ñ—Ñ–µ–∫—Ç –∞—Ç–∞–∫–∏ —É–≤–µ–ª–∏—á–∏—Ç—Å—è –Ω–∞ 25%)
3) –ù–∞–ª–æ–∂–µ–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ "–ì–æ—Ä–µ–Ω–∏–µ". –Ω–∞ –æ–¥–∏–Ω —Ö–æ–¥ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –¢—Ä–∞—Ç–∞ —á–∞—Å—Ç–∏—Ü —Ç–∏–ø–∞ Z (–¥–µ–±–∞—Ñ—Ñ).
4) –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –¥–æ 2—Ö —Ö–æ–¥–æ–≤. –¢—Ä–∞—Ç–∏–º —á–∞—Å—Ç–∏—Ü—É —Ç–∏–ø–∞ I.



<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tetris RPG Battle</title>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="./css/style.css">

    <!-- –®—Ä–∏—Ñ—Ç—ã (Pixel Art —Å—Ç–∏–ª—å) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>

<div id="main-container">
    <div id="tetris-wrapper" class="tetris-wrapper">
        <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
        <canvas id="game-board" width="309" height="619"></canvas>

        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
        <aside class="side-panel">
            <h1>–¢–ï–¢–†–ò–°</h1>

            <div class="info-box">
                <span class="info-title">–°–ß–Å–¢</span>
                <p id="score">0</p>
            </div>

            <div class="info-box">
                <span class="info-title">–õ–ò–ù–ò–ò</span>
                <p id="lines">0</p>
            </div>

            <div class="info-box">
                <span class="info-title">–£–†–û–í–ï–ù–¨</span>
                <p id="level">1</p>
            </div>

            <!-- –ü—Ä–µ–≤—å—é —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–≥—É—Ä—ã -->
            <div class="info-box next-piece-container">
                <span class="info-title">–°–õ–ï–î–£–Æ–©–ê–Ø</span>
                <canvas id="next-piece-board" width="185" height="185"></canvas>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞ (–¥–ª—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã –≤—Ä—É—á–Ω—É—é) -->
            <button id="start-button" class="game-button">–°–¢–ê–†–¢</button>
        </aside>

        <!-- –ü–∞–Ω–µ–ª—å —Ä–µ—Å—É—Ä—Å–æ–≤ (–°–∫—Ä—ã—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã) -->
        <aside class="side-panel hidden" id="resources-container">
            <div class="info-box">
                <span class="info-title">–†–ï–°–£–†–°–´</span>
                <!-- JS –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —Å—é–¥–∞ div'—ã -->
                <div id="main-resources-panel" class="info-box test"></div>
            </div>
        </aside>
    </div> <!-- –ö–æ–Ω–µ—Ü tetris-wrapper -->


    <!-- –°–õ–û–ô –ü–û–í–ï–†–• –ò–ì–†–´ (OVERLAY) -->
    <div id="game-overlay" class="hidden">

        <!-- 1. –û–ö–ù–û –ó–ê–ì–†–£–ó–ö–ò (Loader) -->
        <!-- –ü–æ—è–≤–ª—è–µ—Ç—Å—è, –∫–æ–≥–¥–∞ BattleManager –∂–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –∞—Å—Å–µ—Ç–æ–≤ -->
        <div id="loading-modal" class="hidden">
            <div class="loader-container">
                <div class="pixel-spinner"></div>
                <div class="pixel-spinner-shadow"></div>
            </div>
            <p class="loading-text">–ó–ê–ì–†–£–ó–ö–ê<span class="dots">...</span></p>
        </div>

        <!-- 2. –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ / GAME OVER -->
        <div id="game-menu" class="hidden">
            <h2 id="modal-title">–¢–ï–¢–†–ò–° RPG</h2>
            <p id="modal-text">–°–æ–±–µ—Ä–∏ –ª–∏–Ω–∏–∏, —á—Ç–æ–±—ã –Ω–∞–∫–æ–ø–∏—Ç—å –º–∞–Ω—É!</p>
            <button id="modal-button" class="game-button">–ò–ì–†–ê–¢–¨</button>
        </div>

        <!-- 3. –ë–ò–¢–í–ê (RPG) -->
        <div id="battle-modal" class="hidden">

            <!-- –®–∞–ø–∫–∞: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Ä–æ–≤–Ω—è -->
            <div class="battle-header">
                <h3>–°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
                <div id="statistics-container">
                    <span id="statistics"></span>
                </div>
            </div>

            <!-- –ê—Ä–µ–Ω–∞: –ö–∞–Ω–≤–∞—Å —Å –≥–µ—Ä–æ—è–º–∏ -->
            <div class="battle-arena">
                <canvas id="battle-canvas"></canvas>
            </div>

            <div class="battle-controls-panel">
                <!-- –ö–Ω–æ–ø–∫–∞ —Å–ª–∞–±–æ–π –∞—Ç–∞–∫–∏ -->
                <button id="btn-basic-attack" class="game-button action-btn">
                    ‚öîÔ∏è –¢–æ–ø–Ω—É—Ç—å (–ê—Ç–∞–∫–∞)
                </button>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å–¥–∞—á–∏ -->
                <button id="btn-surrender" class="game-button escape-btn">
                    üè≥Ô∏è –°–¥–∞—Ç—å—Å—è
                </button>
            </div>

            <!-- –õ–æ–≥ –±–æ—è -->
            <div id="battle-log" class="battle-log">
                <div class="log-entry system">> –ë–∏—Ç–≤–∞ –Ω–∞—á–∞–ª–∞—Å—å!</div>
            </div>

            <!-- UI: –ö–û–ù–°–¢–†–£–ö–¢–û–† –ó–ê–ö–õ–ò–ù–ê–ù–ò–ô -->
            <div class="battle-ui-constructor">

                <!-- –ê. –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
                <div id="spell-preview-box" class="preview-box">
                    <!-- –í–µ—Ä–Ω—É–ª–∏ —Ç–µ–∫—Å—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
                    <span id="preview-text">–í–´–ë–ï–†–ò–¢–ï –ó–ê–ö–õ–ò–ù–ê–ù–ò–ï</span>

                    <!-- –î–æ–±–∞–≤–∏–ª–∏ hidden –∏ —É–±—Ä–∞–ª–∏ —Ç–µ–∫—Å—Ç —Ü–µ–Ω—ã -->
                    <span id="preview-cost" class="preview-cost hidden"></span>
                </div>

                <!-- –ë. –ü–∞–Ω–µ–ª—å –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ -->
                <!-- –ï—Å—Ç—å –∫–ª–∞—Å—Å hidden -->
                <div id="modifiers-panel" class="modifiers-panel">
                    <div class="mod-group">
                        <!-- –£–ë–†–ê–õ–ò –∫–ª–∞—Å—Å active —É –∫–Ω–æ–ø–∫–∏ -->
                        <button class="mod-btn" data-mod="J" title="–ú–∞—Å—à—Ç–∞–±">
                            J <span class="badge" id="badge-J">x0</span>
                        </button>

                        <button class="mod-btn" data-mod="I" title="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å">
                            I <span class="badge" id="badge-I">x0</span>
                        </button>
                    </div>
                    <div class="mod-group">
                        <!-- –£–ë–†–ê–õ–ò –∫–ª–∞—Å—Å active —É –∫–Ω–æ–ø–∫–∏ -->
                        <button class="mod-btn" data-mod="Z" title="–î–µ–±–∞—Ñ—Ñ (–£—Ä–æ–Ω)">Z</button>
                        <button class="mod-btn" data-mod="S" title="–ë–∞—Ñ—Ñ (–ë–æ–Ω—É—Å)">S</button>
                    </div>
                </div>

                <!-- –í. –ù–∏–∂–Ω—è—è –ø–∞–Ω–µ–ª—å -->
                <div class="footer-actions vertical-layout">

                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π -->
                    <div class="spells-grid-container" id="spells-container">

                        <!-- –£–ë–†–ê–õ–ò –∫–ª–∞—Å—Å selected —É –∫–Ω–æ–ø–∫–∏ –ê–¢–ê–ö–ê -->
                        <button class="spell-btn base-spell selected" data-spell="ATTACK">
                            <span class="spell-icon">‚öîÔ∏è</span>
                            <div class="spell-info">
                                <span class="spell-name">–ê–¢–ê–ö–ê</span>
                                <span class="spell-cost-badge type-T">20 T</span>
                            </div>
                        </button>

                        <button class="spell-btn base-spell" data-spell="HEAL">
                            <span class="spell-icon">üíö</span>
                            <div class="spell-info">
                                <span class="spell-name">–õ–ï–ß–ï–ù–ò–ï</span>
                                <span class="spell-cost-badge type-O">15 O</span>
                            </div>
                        </button>

                        <button class="spell-btn base-spell" data-spell="SHIELD">
                            <span class="spell-icon">üõ°Ô∏è</span>
                            <div class="spell-info">
                                <span class="spell-name">–©–ò–¢</span>
                                <span class="spell-cost-badge type-L">15 L</span>
                            </div>
                        </button>

                        <button class="spell-btn base-spell" data-spell="FIREBALL">
                            <span class="spell-icon">üî•</span>
                            <div class="spell-info">
                                <span class="spell-name">–û–ì–û–ù–¨</span>
                                <span class="spell-cost-badge type-T">30 T</span>
                            </div>
                        </button>

                        <button class="spell-btn base-spell" data-spell="POISON">
                            <span class="spell-icon">‚ò†Ô∏è</span>
                            <div class="spell-info">
                                <span class="spell-name">–Ø–î</span>
                                <span class="spell-cost-badge type-Z">10 Z</span>
                            </div>
                        </button>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∞ –ö–ê–°–¢ -->
                    <div class="cast-wrapper-vertical">
                        <!-- –î–û–ë–ê–í–ò–õ–ò –∫–ª–∞—Å—Å hidden -->
                        <button id="cast-btn" class="cast-btn hidden">
                            –ü–†–ò–ú–ï–ù–ò–¢–¨
                        </button>
                    </div>

                </div>
            </div>
            <!-- –ö–æ–Ω–µ—Ü UI –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ -->

        </div> <!-- –ö–æ–Ω–µ—Ü battle-modal -->

    </div> <!-- –ö–æ–Ω–µ—Ü game-overlay -->

</div>

<!-- –°–ö–†–ò–ü–¢–´ (–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω!) -->
<script src="./js/utils.js"></script>
<script src="./js/event_strings.js"></script>
<script src="./js/assets_string.js"></script>
<script src="./js/renderers/graphics_config.js"></script>
<script src="./js/rpg/heroesDB.js"></script>
<script src="./js/eventBus.js"></script>
<script src="./js/rpg/unit.js"></script>
<script src="./js/inputHandler.js"></script>
<script src="js/managers/uiManager.js"></script>
<script src="./js/grid.js"></script>
<script src="./js/pieceFactory.js"></script>
<script src="js/renderers/renderer.js"></script>
<script src="js/renderers/battleRenderer.js"></script>
<script src="js/managers/animationManager.js"></script>
<script src="js/managers/resourceManager.js"></script>
<script src="js/managers/assetsManager.js"></script>
<script src="./js/rpg/dbSpells.js"></script>
<script src="./js/rpg/castableSpell.js"></script>
<script src="./js/rpg/spellBuilder.js"></script>
<script src="js/managers/battleManager.js"></script>
<script src="./js/game.js"></script>
<script src="./js/main.js"></script>

</body>
</html>

<div id="modifiers-panel" class="modifiers-panel compact">
                        <!-- –ö–Ω–æ–ø–∫–∏ J, I, Z, S –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å —á–µ—Ä–µ–∑ JS -->
                        <button class="mod-btn active" title="–ú–∞—Å—à—Ç–∞–±">
                            J <span class="badge" style="display: block;">x2</span>
                        </button>

                        <!-- –ö–Ω–æ–ø–∫–∞ I: –ù–µ –∞–∫—Ç–∏–≤–Ω–∞ -->
                        <button class="mod-btn" title="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å">
                            I <span class="badge">x0</span>
                        </button>

                        <!-- –ö–Ω–æ–ø–∫–∞ Z: –ê–∫—Ç–∏–≤–Ω–∞ (–í–∫–ª—é—á–µ–Ω–∞) -->
                        <button class="mod-btn active" title="–î–µ–±–∞—Ñ—Ñ">
                            Z
                        </button>

                        <!-- –ö–Ω–æ–ø–∫–∞ S: –ù–µ –∞–∫—Ç–∏–≤–Ω–∞ -->
                        <button class="mod-btn" title="–ë–∞—Ñ—Ñ">
                            S
                        </button>
                    </div>


         –ö–æ–¥ –ø–æ–∫–∞ –Ω–µ –ø–∏—à–∏. –ü—Ä–æ—Å—Ç–æ –æ—Ü–µ–Ω–∏ —é–∑–∞–±–∏–ª–∏—Ç–∏
         –°–Ω–∞—á–∞–ª–∞ –∫–Ω–æ–ø–∫–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã.
         –ö–æ–≥–¥–∞ –º—ã –≤—ã–±–∏—Ä–∞–µ–º –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∞ –Ω—É–∂–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞, –±–∞—Ñ—Ñ –∏–ª–∏ –¥–µ–±–∞—Ñ—Ñ.
         –ù–∞ –±–µ–π–¥–∂–∏–∫–µ —ç—Ç–æ–π –∫–Ω–æ–ø–∫–∏ –ø–∏—à–µ—Ç—Å—è off.
         –ö–æ–≥–¥–∞ –º—ã –µ–µ –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –±–µ–π–¥–∂–µ –ø–∏—à–µ—Ç—Å—è on –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–∫—Ç–∏–≤–µ–Ω –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏ I. –û–Ω –±–µ–∑ –±–µ–π–¥–∂–∏–∫–∞.
         –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ I –ø–æ—è–≤–ª—è–µ—Ç—Å—è –±–µ–π–¥–∂–∏–∫ *1 *2 –∏ —Ç–¥... –ö–æ–≥–¥–∞ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –Ω—É–ª—è –±–µ–π–¥–∂–∏–∫ –∏—Å—á–µ–∑–∞–µ—Ç.
